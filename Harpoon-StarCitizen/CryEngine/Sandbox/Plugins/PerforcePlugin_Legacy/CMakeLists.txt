#START-FILE-LIST
# File List auto generated by waf2cmake.py, do not modify manually.
option(PLUGIN_PERFORCE_LEGACY "Add Legacy Perforce Plugin" OFF)
if (NOT PLUGIN_PERFORCE_LEGACY)
	return()
endif()

start_sources()
# -- perforceplugin.waf_files --
sources_platform(ALL)
add_sources("NoUberFile"
	SOURCE_GROUP "Root"
		"PasswordDlg.cpp"
		"PasswordDlg.h"
		"PerforcePlugin.cpp"
		"PerforcePlugin.h"
		"PerforcePlugin.rc"
		"PerforcePlugin.qrc"
		"PerforceSourceControl.cpp"
		"PerforceSourceControl.h"
		"resource.h"
		"stdafx.cpp"
		"stdafx.h"
)

end_sources()
#END-FILE-LIST

CryEditorPlugin(PerforcePlugin_Legacy PCH "stdafx.cpp" SOLUTION_FOLDER "Sandbox/Plugins" DISABLE_MFC)
force_static_crt()
target_compile_definitions(${THIS_PROJECT} PRIVATE -DBOOST_ALL_NO_LIB)

set(P4API_DIR "${SDK_DIR}/p4api/2015.1")

target_include_directories(${THIS_PROJECT} PRIVATE "${P4API_DIR}/include")

if (MSVC_VERSION GREATER 1900) # Visual Studio > 2015
	set(p4api_subfolder vc14)
elseif (MSVC_VERSION EQUAL 1900) # Visual Studio 2015
	set(p4api_subfolder vc14)
elseif (MSVC_VERSION EQUAL 1800) # Visual Studio 2013
	set(p4api_subfolder vc12)
elseif (MSVC_VERSION EQUAL 1700) # Visual Studio 2012
	set(p4api_subfolder vc11)
endif()

set_libpath_flag()
set_property(TARGET ${THIS_PROJECT} APPEND_STRING PROPERTY LINK_FLAGS_DEBUG " ${LIBPATH_FLAG}\"${P4API_DIR}/${p4api_subfolder}_x64_debug/lib\"")
set_property(TARGET ${THIS_PROJECT} APPEND_STRING PROPERTY LINK_FLAGS_PROFILE " ${LIBPATH_FLAG}\"${P4API_DIR}/${p4api_subfolder}_x64_release/lib\"")
set_property(TARGET ${THIS_PROJECT} APPEND_STRING PROPERTY LINK_FLAGS_RELEASE " ${LIBPATH_FLAG}\"${P4API_DIR}/${p4api_subfolder}_x64_release/lib\"")
target_link_libraries(${THIS_PROJECT} PRIVATE libclient libp4sslstub librpc libsupp)

